---
language: android
android:
  components:
  - platform-tools-23
  - tools
  - build-tools-23.0.2
  - android-23
  - sys-img-armeabi-v7a-android-18
  - extra-android-support
  - extra-android-m2repository
  
env:
  global:
    - MALLOC_ARENA_MAX=2
    - ADB_INSTALL_TIMEOUT=10

cache:
  directories:
  - "$HOME/.gradle"
before_script:
- sudo apt-get update -qq
- sudo apt-get install -y ivy
- echo no | android create avd --force -n test -t android-18 --abi armeabi-v7a
- emulator -avd test -no-skin -no-audio -no-window &
- android-wait-for-emulator
- adb shell input keyevent 82 &
script:
- "./gradlew clean testDebugUnitTest connectedDebugAndroidTest --no-daemon"
global_env: artifactory_user=[secure] ARTIFACTORY_DEPLOY_USER=[secure] ARTIFACTORY_DEPLOY_PASS=[secure]
  artifactory_password=[secure]

sudo: required
dist: precise

